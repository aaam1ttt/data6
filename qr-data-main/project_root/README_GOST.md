# ГОСТ Стандартизированные Размеры Штрих-Кодов

Система поддерживает стандартизированные размеры штрих-кодов согласно российским государственным стандартам (ГОСТ).

## Обзор Системы

Реализованы следующие стандарты:
- **ГОСТ Р ИСО/МЭК 18004** - QR коды
- **ГОСТ Р ИСО/МЭК 16022** - DataMatrix коды  
- **ГОСТ Р 51294.2-99** - Code 128 линейные коды
- **ГОСТ Р ИСО/МЭК 15438** - PDF417 коды
- **ГОСТ (аналог ISO/IEC 24778)** - Aztec коды

## Размеры по ГОСТ

### QR коды
- **QR-S1**: Малый (15×15 мм) - для документооборота
- **QR-S2**: Стандартный (20×20 мм) - для ТОРГ-12 и подобных форм
- **QR-S3**: Увеличенный (25×25 мм) - для накладных
- **QR-S4**: Печатный (30×30 мм) - для этикеток

### DataMatrix коды
- **DM-S1**: Микро (8×8 мм) - для маркировки деталей
- **DM-S2**: Малый (12×12 мм) - для деталей
- **DM-S3**: Средний (16×16 мм) - для упаковки  
- **DM-S4**: Большой (20×20 мм) - для паллет

### Code 128 линейные коды
- **C128-H1**: Низкий (30×8 мм) - для документов
- **C128-H2**: Средний (40×12 мм) - для накладных
- **C128-H3**: Высокий (50×15 мм) - для этикеток
- **C128-H4**: Печатный (60×20 мм) - промышленный

### PDF417 коды
- **PDF417-S1**: Компактный (25×10 мм) - для форм
- **PDF417-S2**: Стандартный (35×15 мм) - для документов
- **PDF417-S3**: Расширенный (45×20 мм) - для этикеток
- **PDF417-S4**: Полный (55×25 мм) - промышленность

### Aztec коды
- **AZ-S1**: Малый (15×15 мм) - для документооборота
- **AZ-S2**: Средний (20×20 мм) - для форм
- **AZ-S3**: Большой (25×25 мм) - для этикеток
- **AZ-S4**: Печатный (30×30 мм) - промышленный

## Преимущества Системы ГОСТ

### 1. Стандартизация
- Единые размеры для всех типов документов
- Совместимость с российскими формами документооборота
- Соответствие требованиям государственных стандартов

### 2. Оптимизация Печати
- Точные расчеты размещения на листе А4
- Максимальное использование площади страницы
- Стандартные отступы и межкодовые расстояния

### 3. Качество Печати
- 300 DPI как стандарт для высококачественной печати
- Точная корреляция между экранным отображением и печатью
- Оптимизированные размеры для различных принтеров

### 4. Совместимость
- Плавный переход от старых произвольных размеров
- Автоматическая миграция существующих настроек
- Поддержка legacy-кода

## Размещение на Листе А4

### QR-S2 (ТОРГ-12 стандарт, 20×20 мм)
- **На листе**: 9×13 = 117 кодов
- **Использование площади**: 75%
- **Рекомендуется для**: форм ТОРГ-12, накладных, документооборота

### DM-S3 (средний DataMatrix, 16×16 мм)  
- **На листе**: 11×15 = 165 кодов
- **Использование площади**: 67%
- **Рекомендуется для**: упаковки, маркировки товаров

### C128-H2 (средний линейный, 40×12 мм)
- **На листе**: ~55 кодов (с учетом переменной ширины)
- **Рекомендуется для**: накладных, инвентаризации

## Использование в Коде

```python
from app.core.codes import generate_by_type

# Генерация QR кода по ГОСТ размеру S2 (ТОРГ-12)
img = generate_by_type("QR", "Текст", gost_code="QR-S2")

# Генерация DataMatrix по ГОСТ размеру S3
img = generate_by_type("DM", "Данные", gost_code="DM-S3")

# Генерация Code 128 по ГОСТ размеру H2
img = generate_by_type("C128", "123456789", gost_code="C128-H2")
```

## API Поддержка

```javascript
// Генерация через API с ГОСТ размером
fetch('/forms/api_generate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        text: 'Текст для кодирования',
        code_type: 'QR',
        gost_code: 'QR-S2'  // ГОСТ размер
    })
})
```

## Интеграция с Формами

Все формы (ТОРГ-12, транспортные накладные и др.) автоматически используют ГОСТ размеры:
- Выпадающие списки содержат ГОСТ коды с описаниями
- Автоматический расчет размещения на странице  
- Подсказки по эффективности использования площади

## Тестирование

Запуск тестов системы ГОСТ:

```bash
python test_gost_dimensions.py  # Базовые тесты размеров
python test_gost_system.py     # Полное тестирование интеграции
```

## Миграция Старых Размеров

Старые произвольные размеры автоматически сопоставляются с ближайшими ГОСТ размерами:
- 300px → QR-S4 (печатный)
- 420px → QR-S4 (печатный) 
- 280px → DM-S4 (большой DataMatrix)
- 200px → C128-H2 (средняя высота)

Система обеспечивает плавный переход без нарушения работы существующих интеграций.